@model Book
@{
    
    var photoPath = "~/images/" + (@Model.PhotoPath ?? "noimage.jpg");
}


<table class="table thead-dark">
    <tr>
        <th>Name</th>
        <th>Picture</th>
        <th>ISBN</th>
        <th>Category</th>
        <th>Action</th>
    </tr>
    <tr>
        <td>@Model.Name</td>
        <td><img class="card-img-top" src="@photoPath" asp-append-version="true" style="height:200px; width:auto" /></td>
        <td>@Model.ISBN</td>
        <td>@Model.Category</td>
        <td>
            <a class="btn btn-warning btn-sm" asp-controller="Book" asp-action="Edit" asp-route-id="@Model.Id">Edit</a>  <a class="btn btn-danger btn-sm" asp-controller="Book" asp-action="Delete" asp-route-id="@Model.Id">Delete</a>
        </td>
    </tr>

</table>

<div class="form-group">
    <h3>Description</h3>
    <p>@Model.Description</p>
</div>
<div class="form-group">
    <h3>Library Location</h3>
    <p>@Model.LibraryAddressStreet, @Model.LibraryAddressCity, @Model.LibraryAddressState @Model.LibraryAddressZip</p>
</div>
<div class="container" id="GoogleMaps" style="width:100%;height:400px;"></div>


<script>
        function initMap() {
            const map = new google.maps.Map(document.getElementById("GoogleMaps"), {
                zoom: 10,
                center: { lat: -34.397, lng: 150.644 },
            });
            const geocoder = new google.maps.Geocoder();
            geocodeAddress(geocoder, map);

        }

        function geocodeAddress(geocoder, resultsMap) {
            const address = '@Model.LibraryAddressStreet,@Model.LibraryAddressCity,@Model.LibraryAddressState,@Model.LibraryAddressZip';
            geocoder.geocode({ address: address }, (results, status) => {
                if (status === "OK") {
                    resultsMap.setCenter(results[0].geometry.location);
                    new google.maps.Marker({
                        map: resultsMap,
                        position: results[0].geometry.location,
                        label: "@Model.Name",
                    });
                } else {
                    alert(
                        "Geocode was not successful for the following reason: " + status
                    );
                }
            });
        }
</script>

<script defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDU_bII886jEHcp57DpGeS1uCJTaWaROWc&callback=initMap&libraries=&v=weekly">
</script>


